<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>耀敬业的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="iOS 性能优化优化什么 列表顺畅度优化 启动时间优化 内容优化  理解优化任务的底层运行机制如果不理解优化任务的底层运行机制, 可能很难达到更好的优化效果. 比如做启动时间优化时, 如果不知道 iOS 中 App 的启动时间是由 main 之前和 main 之后两部分时间组成的, 此时如果你的 App 是因为 main 函数之前的部分占用了过多的启动时间, 可能你花了大量精力去优化 main 之">
<meta property="og:type" content="article">
<meta property="og:title" content="耀敬业的博客">
<meta property="og:url" content="http://yoursite.com/2018/09/19/2018-09-18-iOS性能优化/index.html">
<meta property="og:site_name" content="耀敬业的博客">
<meta property="og:description" content="iOS 性能优化优化什么 列表顺畅度优化 启动时间优化 内容优化  理解优化任务的底层运行机制如果不理解优化任务的底层运行机制, 可能很难达到更好的优化效果. 比如做启动时间优化时, 如果不知道 iOS 中 App 的启动时间是由 main 之前和 main 之后两部分时间组成的, 此时如果你的 App 是因为 main 函数之前的部分占用了过多的启动时间, 可能你花了大量精力去优化 main 之">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-09-19T10:34:43.805Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="耀敬业的博客">
<meta name="twitter:description" content="iOS 性能优化优化什么 列表顺畅度优化 启动时间优化 内容优化  理解优化任务的底层运行机制如果不理解优化任务的底层运行机制, 可能很难达到更好的优化效果. 比如做启动时间优化时, 如果不知道 iOS 中 App 的启动时间是由 main 之前和 main 之后两部分时间组成的, 此时如果你的 App 是因为 main 函数之前的部分占用了过多的启动时间, 可能你花了大量精力去优化 main 之">
  
    <link rel="alternate" href="/atom.xml" title="耀敬业的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">耀敬业的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2018-09-18-iOS性能优化" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/19/2018-09-18-iOS性能优化/" class="article-date">
  <time datetime="2018-09-19T02:28:00.435Z" itemprop="datePublished">2018-09-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="iOS-性能优化"><a href="#iOS-性能优化" class="headerlink" title="iOS 性能优化"></a>iOS 性能优化</h1><h3 id="优化什么"><a href="#优化什么" class="headerlink" title="优化什么"></a>优化什么</h3><ul>
<li>列表顺畅度优化</li>
<li>启动时间优化</li>
<li>内容优化</li>
</ul>
<h3 id="理解优化任务的底层运行机制"><a href="#理解优化任务的底层运行机制" class="headerlink" title="理解优化任务的底层运行机制"></a>理解优化任务的底层运行机制</h3><p>如果不理解优化任务的底层运行机制, 可能很难达到更好的优化效果.</p>
<p>比如做启动时间优化时, 如果不知道 iOS 中 App 的启动时间是由 main 之前和 main 之后两部分时间组成的, 此时如果你的 App 是因为 main 函数之前的部分占用了过多的启动时间, 可能你花了大量精力去优化 main 之后的时间却没有达到好的优化效果. 如果不知道 App 启动过程的运行机制, 就无法知道去检查是否链接了过多的自定义的动态库或者去 load 函数里面确认是否有耗时的操作等等. 还有在做 fps 优化的时候, 如果不了解卡顿的底层是什么、一个 view 从创建到显示过程中经历哪些步骤、CPU 和 GPU 在这个过程中扮演了什么角色, 则很难做到丝滑般的顺畅. 还有在做内容优化的时候, 如果不了解内容分为哪几类、系统对 App 和不同类型 extension 的内存限制机制的不同、超过限制系统会采取什么操作等等, 也很难把内容优化做好. 只有深入了解底层机制才能更好地有针对性地提出更优的解决方案.</p>
<h3 id="优化技巧"><a href="#优化技巧" class="headerlink" title="优化技巧"></a>优化技巧</h3><p><strong>1. view 优化</strong></p>
<ul>
<li>1.1 不透明的 view 设置 opaque.</li>
<li>1.2 根据实际情况重用、延时加载或预加载 view</li>
<li>1.3 减少subview数量, 定制复杂 cell 使用 drawRect, 尽量使用drawRect 而不是 layoutSuvView.</li>
<li>1.4 不直接调用drawRect、layoutSubView 方法, 万不得已时可以用替代方法: setNeedsDisplayInRect, layountIfNeeded, 替代方法也尽量不要调用.</li>
</ul>
<p><strong>2. UITableView 优化</strong></p>
<ul>
<li>2.1 正确使用 reuseIdentifier 重用 cell.</li>
<li>2.2 尽量使所有的view opque.</li>
<li>2.3 减少 subviews 数量, 定制复杂的 cell 使用 drawRect.</li>
<li>2.4 尽量不调用 cellForRowAtIndexPath, 调用 cellForRowAtIndexpath 会导致 cell 缓存失败.</li>
<li>2.5 cache 尽可能多的东西, 包括行高.</li>
</ul>
<p><strong>3. 缓存优化</strong></p>
<ul>
<li>3.1 缓存不大可能改变但是需要经常读取的东西, 如: 远端服务器的响应、图片、计算结果.</li>
<li>3.2 重大开销对象, 对于初始化很慢的对象通过添加属性的方式保持该对象, 保证只初始化一次, 多次复用, 如: NSDataFormatter.</li>
<li>3.3 方法指针缓存, 如果一个方法在一个循环次数非常多的循环中使用, 在进入循环前使用methodForSelector获取该方法的IMP, 在循环体直接调用该IMP.</li>
</ul>
<p><strong>4.线程优化</strong></p>
<ul>
<li>4.1 耗时操作使用子线程进行, 或者放入任务列表中.</li>
<li>4.2 同步使用串行队列替代同步锁.</li>
<li>4.3 不重要的任务放在 idle 中运行.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/19/2018-09-18-iOS性能优化/" data-id="cjoquococ000cij44a7olyj82" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/10/2018-10-10-iOS之图片缓存/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2018/08/28/2018-08-28-读书笔记《大话数据结构》/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/加密/">加密</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/哈希/">哈希</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字典/">字典</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/底层/">底层</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/加密/" style="font-size: 10px;">加密</a> <a href="/tags/哈希/" style="font-size: 10px;">哈希</a> <a href="/tags/字典/" style="font-size: 10px;">字典</a> <a href="/tags/底层/" style="font-size: 15px;">底层</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/笔记/" style="font-size: 20px;">笔记</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/21/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2018/11/19/2018-11-19-NSOperationQueue-线程同步/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/11/05/iOS-自定义转场效果/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/10/10/2018-10-10-iOS之图片缓存/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/09/19/2018-09-18-iOS性能优化/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 耀敬业<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>